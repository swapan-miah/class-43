/* eslint-disable react/jsx-key */
import './Product.css'
import { useEffect, useState } from 'react';
const Product = () => {

    const [sProduct, setProduct] = useState([]);

    useEffect(() => {

        fetch('product.json')
        .then(responce => responce.json())
        .then(sData => setProduct(sData))

    },[])

    const [cart, setCart] = useState([]);
    const addToCart = (sproduct) => {
        const newCart = [...cart, sproduct];
        setCart(newCart);

    }

    let total = 0;
    let shipingCharge = 0;
    let quantity = 0;

    for(const sCart of cart){

        quantity = quantity + sCart.quantity;
        total = total + (sCart.price * sCart.quantity);
        shipingCharge = shipingCharge + sCart.shipping;
    }
    const taxCalculate = total / 100;
    const tax = taxCalculate * 5;
    const grandTotal = total + shipingCharge + tax;

    const clearToCart = () =>{

        setCart([]);
    }

    return (
        <div>

            <div className="product-head">
                <div className="product-left">
                {
                    sProduct.map(product => <div key={product.id} className='s-item'>
                        <div className="flex">
                            <div className="image">
                                <img src={product.img} alt="" />
                            </div>
                            <div className="contents">
                                <h4>{product.name}</h4>
                                <p>Price : {product.price}$</p>
                                <span>Category : {product.category}</span>
                                <span>Rating : {product.ratings} Star</span>
                            </div>
                            <button onClick={() => addToCart(product)}>Add To Cart
                                <svg xmlns="http://www.w3.org/2000/svg" width="23" height="24" viewBox="0 0 23 24" fill="none">
                                <path d="M18.2185 14.2222H9.13044L9.33335 15.3333H17.6548C18.1323 15.3333 18.4862 15.8299 18.3804 16.3514L18.2093 17.1943C18.7888 17.5093 19.1883 18.1746 19.1883 18.9445C19.1883 20.0279 18.3972 20.9043 17.4267 20.8887C16.5021 20.8738 15.7417 20.0334 15.7168 18.9982C15.7031 18.4326 15.9054 17.9201 16.2377 17.5555H9.7382C10.0599 17.9085 10.2598 18.4002 10.2598 18.9445C10.2598 20.0491 9.43736 20.9386 8.44089 20.8867C7.5561 20.8407 6.83651 20.04 6.79001 19.0493C6.75411 18.2843 7.11354 17.6099 7.65964 17.2582L5.48185 5.33334H3.31534C2.90441 5.33334 2.57129 4.96025 2.57129 4.5V3.94445C2.57129 3.4842 2.90441 3.11111 3.31534 3.11111H6.49394C6.84739 3.11111 7.15205 3.38962 7.22289 3.77743L7.50705 5.33334H19.6841C20.1615 5.33334 20.5154 5.8299 20.4096 6.35136L18.944 13.5736C18.8671 13.953 18.5659 14.2222 18.2185 14.2222ZM15.2201 8.94445H13.732V7.55556C13.732 7.24872 13.5099 7 13.236 7H12.7399C12.466 7 12.2439 7.24872 12.2439 7.55556V8.94445H10.7558C10.4818 8.94445 10.2598 9.19316 10.2598 9.50001V10.0556C10.2598 10.3624 10.4818 10.6111 10.7558 10.6111H12.2439V12C12.2439 12.3068 12.466 12.5556 12.7399 12.5556H13.236C13.5099 12.5556 13.732 12.3068 13.732 12V10.6111H15.2201C15.4941 10.6111 15.7161 10.3624 15.7161 10.0556V9.50001C15.7161 9.19316 15.4941 8.94445 15.2201 8.94445Z" fill="#0E161A"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    )
                }
                </div>
                
                <div className="product-right">

                    <h5>Order Summary</h5>
                    <span>Selected Items: {cart.length}</span>
                    <span>Total Price: {total} $</span>
                    <span>Total Shipping Charge: {shipingCharge} $</span>
                    <span>Tax: {tax.toFixed(2)} $</span>
                    <p>Grand Total: {grandTotal} $</p>
                    <button onClick={() => clearToCart()}>Clear Cart 
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M13.7188 18.25H14.6562C14.7806 18.25 14.8998 18.2006 14.9877 18.1127C15.0756 18.0248 15.125 17.9056 15.125 17.7812V9.34375C15.125 9.21943 15.0756 9.1002 14.9877 9.01229C14.8998 8.92439 14.7806 8.875 14.6562 8.875H13.7188C13.5944 8.875 13.4752 8.92439 13.3873 9.01229C13.2994 9.1002 13.25 9.21943 13.25 9.34375V17.7812C13.25 17.9056 13.2994 18.0248 13.3873 18.1127C13.4752 18.2006 13.5944 18.25 13.7188 18.25ZM20.125 5.125H16.9059L15.5777 2.91016C15.4111 2.63243 15.1753 2.40261 14.8934 2.24311C14.6115 2.0836 14.293 1.99985 13.9691 2H10.0309C9.70709 1.99998 9.38883 2.0838 9.10707 2.2433C8.82531 2.4028 8.58965 2.63254 8.42305 2.91016L7.09414 5.125H3.875C3.70924 5.125 3.55027 5.19085 3.43306 5.30806C3.31585 5.42527 3.25 5.58424 3.25 5.75V6.375C3.25 6.54076 3.31585 6.69973 3.43306 6.81694C3.55027 6.93415 3.70924 7 3.875 7H4.5V20.125C4.5 20.6223 4.69754 21.0992 5.04917 21.4508C5.40081 21.8025 5.87772 22 6.375 22H17.625C18.1223 22 18.5992 21.8025 18.9508 21.4508C19.3025 21.0992 19.5 20.6223 19.5 20.125V7H20.125C20.2908 7 20.4497 6.93415 20.5669 6.81694C20.6842 6.69973 20.75 6.54076 20.75 6.375V5.75C20.75 5.58424 20.6842 5.42527 20.5669 5.30806C20.4497 5.19085 20.2908 5.125 20.125 5.125ZM9.9625 3.98867C9.98339 3.9539 10.0129 3.92515 10.0483 3.90523C10.0836 3.8853 10.1235 3.87489 10.1641 3.875H13.8359C13.8764 3.87495 13.9162 3.8854 13.9515 3.90532C13.9868 3.92524 14.0163 3.95396 14.0371 3.98867L14.7191 5.125H9.28086L9.9625 3.98867ZM17.625 20.125H6.375V7H17.625V20.125ZM9.34375 18.25H10.2812C10.4056 18.25 10.5248 18.2006 10.6127 18.1127C10.7006 18.0248 10.75 17.9056 10.75 17.7812V9.34375C10.75 9.21943 10.7006 9.1002 10.6127 9.01229C10.5248 8.92439 10.4056 8.875 10.2812 8.875H9.34375C9.21943 8.875 9.1002 8.92439 9.01229 9.01229C8.92439 9.1002 8.875 9.21943 8.875 9.34375V17.7812C8.875 17.9056 8.92439 18.0248 9.01229 18.1127C9.1002 18.2006 9.21943 18.25 9.34375 18.25Z" fill="white"/>
                        </svg>
                    </button>
                    <button>Review Order
                        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
                        <path d="M11.3789 3.85556L12.4524 2.78202C12.907 2.32745 13.642 2.32745 14.0918 2.78202L23.4925 12.1779C23.9471 12.6325 23.9471 13.3675 23.4925 13.8172L14.0918 23.218C13.6372 23.6725 12.9022 23.6725 12.4524 23.218L11.3789 22.1444C10.9195 21.685 10.9292 20.9355 11.3982 20.4858L17.2253 14.9343H3.32733C2.68418 14.9343 2.16675 14.4169 2.16675 13.7737V12.2263C2.16675 11.5831 2.68418 11.0657 3.32733 11.0657H17.2253L11.3982 5.51422C10.9243 5.0645 10.9147 4.31495 11.3789 3.85556Z" fill="white"/>
                        </svg>
                    </button>
                    
                </div>
            </div>
        </div>
    );
};

export default Product;